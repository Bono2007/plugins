<% 
// This complex template tests various patterns

// Regular JavaScript code near the top that shouldn't be affected
const dayNum = date.dayNumber(`${date.format('YYYY-MM-DD',Editor.note.title)}`)
const isWeekday = dayNum >= 1 && dayNum <= 5
const isWeekend = !isWeekday
const data = { numDays: 14, sectionHeading: 'Test' }; // Regular JS object notation

// Valid DataStore calls with single-quoted JSON that should be fixed
await DataStore.invokePluginCommandByName('Command1','plugin.id',['{'numDays':14, 'sectionHeading':'Test Section', 'runSilently': true}'])

// More complex JSON cases with nested quotes
await DataStore.invokePluginCommandByName('Command2','plugin.id',['{'message':'This has \\\'nested\\\' quotes', 'count': 42}'])

// Valid JavaScript object in a variable (shouldn't be affected)
const options = { key: 'value', another: 123 };

// Another DataStore call (make sure this one is already in double quotes as a test)
await DataStore.invokePluginCommandByName('Command3','plugin.id',[{"test":true}])
-%> 